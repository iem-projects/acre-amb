#N canvas 1538 441 895 579 10;
#X declare -path . -path abs -path data;
#X declare -path libs;
#X declare -lib zexy;
#X declare -lib iemmatrix/mtx_mul~;
#X declare -lib iemmatrix/mtx_add;
#X declare -lib iemmatrix/mtx_mul;
#X declare -lib iemmatrix/mtx_0x210x3d;
#X declare -lib iemmatrix/mtx_0x21;
#X declare -lib iemmatrix/mtx_0x260x26;
#X declare -lib iemmatrix/mtx_0x26;
#X declare -lib iemmatrix/mtx_0x2a0x7e;
#X declare -lib iemmatrix/mtx_0x2a;
#X declare -lib iemmatrix/mtx_0x2b;
#X declare -lib iemmatrix/mtx_0x2d;
#X declare -lib iemmatrix/mtx_0x2e0x2a;
#X declare -lib iemmatrix/mtx_0x2e0x2f;
#X declare -lib iemmatrix/mtx_0x2e0x5e;
#X declare -lib iemmatrix/mtx_0x2f;
#X declare -lib iemmatrix/mtx_0x3a;
#X declare -lib iemmatrix/mtx_0x3c0x3c;
#X declare -lib iemmatrix/mtx_0x3c0x3d;
#X declare -lib iemmatrix/mtx_0x3c;
#X declare -lib iemmatrix/mtx_0x3d0x3d;
#X declare -lib iemmatrix/mtx_0x3e0x3d;
#X declare -lib iemmatrix/mtx_0x3e0x3e;
#X declare -lib iemmatrix/mtx_0x3e;
#X declare -lib iemmatrix/mtx_0x7c0x7c;
#X declare -lib iemmatrix/mtx_0x7c;
#X declare -lib iem_bin_ambi;
#X declare -lib iem_ambi;
#X declare -lib iemmatrix;
#X declare -path libs/iemlib -stdpath iemlib;
#X declare -lib iemlib/iemlib1 -lib iemlib/iemlib2;
#X declare -path libs/iemmatrix -stdpath iemmatrix;
#X declare -path libs/iem_ambi -stdpath iem_ambi;
#X declare -path libs/acre -stdpath acre;
#X declare -path libs/iem_bin_ambi -stdpath iem_bin_ambi;
#X declare -path libs/iem_spec2 -stdpath iem_spec2;
#X declare -lib iem_spec2;
#X declare -path ../..;
#N canvas 92 467 582 514 init 0;
#X obj 45 32 acre/initbang;
#X obj 45 89 acre/initbang;
#X msg 45 54 \; /mxr/fadetime 30 \;;
#X obj 91 132 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 45 111 t b b;
#X text 201 163 inits for dynamic patching;
#X text 91 264 load settings for mixer and playback relativ to acre
lib;
#X obj 91 182 amb/amb/initbangs;
#X obj 45 345 r /amb/inited;
#X text 145 31 Acreinit is for reinit all acre objects (Reset);
#X text 118 131 Ambisonics needs a series of inits for dynamic patching
\, to avoid to much warnings with r~ names and so on.;
#X text 220 185 afterwards load settings from file;
#X msg 45 310 \; pd-GUI vis 1;
#X text 146 309 last bring GUI to front !;
#X msg 91 205 \; /set/program/load symbol ../amb/examples/mixer3D3O.txt
\; /set/program/nr 0 \; /set/program/recall bang, f 64;
#X msg 44 390 \; 2Dto3D/load symbol ../examples/decoder-2D3O7SPK.mtx
\; 2Dto3D/init bang \; 2Dto3D/print bang;
#X text 143 364 optional Init virtual 7 speaker 2D ambisonics;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 3 0 7 0;
#X connect 4 0 12 0;
#X connect 4 1 7 0;
#X connect 7 0 14 0;
#X connect 8 0 15 0;
#X restore 14 42 pd init;
#N canvas 300 480 866 481 declares 0;
#X obj 31 65 declare -path . -path abs -path data;
#X obj 31 85 declare -path libs;
#X obj 404 209 declare -lib zexy;
#N canvas 659 253 424 343 matrix_specialnames 0;
#X obj 13 15 declare -lib iemmatrix/mtx_mul~;
#X obj 13 35 declare -lib iemmatrix/mtx_add;
#X obj 13 55 declare -lib iemmatrix/mtx_mul;
#X obj 12 80 declare -lib iemmatrix/mtx_0x210x3d;
#X obj 12 100 declare -lib iemmatrix/mtx_0x21;
#X obj 12 120 declare -lib iemmatrix/mtx_0x260x26;
#X obj 12 140 declare -lib iemmatrix/mtx_0x26;
#X obj 12 160 declare -lib iemmatrix/mtx_0x2a0x7e;
#X obj 12 180 declare -lib iemmatrix/mtx_0x2a;
#X obj 12 200 declare -lib iemmatrix/mtx_0x2b;
#X obj 12 220 declare -lib iemmatrix/mtx_0x2d;
#X obj 12 240 declare -lib iemmatrix/mtx_0x2e0x2a;
#X obj 12 260 declare -lib iemmatrix/mtx_0x2e0x2f;
#X obj 12 280 declare -lib iemmatrix/mtx_0x2e0x5e;
#X obj 12 300 declare -lib iemmatrix/mtx_0x2f;
#X obj 42 380 declare -lib iemmatrix/mtx_0x3a;
#X obj 42 400 declare -lib iemmatrix/mtx_0x3c0x3c;
#X obj 42 420 declare -lib iemmatrix/mtx_0x3c0x3d;
#X obj 42 440 declare -lib iemmatrix/mtx_0x3c;
#X obj 42 480 declare -lib iemmatrix/mtx_0x3d0x3d;
#X obj 42 500 declare -lib iemmatrix/mtx_0x3e0x3d;
#X obj 42 520 declare -lib iemmatrix/mtx_0x3e0x3e;
#X obj 42 540 declare -lib iemmatrix/mtx_0x3e;
#X obj 42 580 declare -lib iemmatrix/mtx_0x7c0x7c;
#X obj 42 600 declare -lib iemmatrix/mtx_0x7c;
#X restore 555 275 pd matrix_specialnames;
#X obj 411 366 declare -lib iem_bin_ambi;
#X obj 384 326 declare -lib iem_ambi;
#X text 295 63 project paths;
#X text 172 86 project libnraries path;
#X obj 387 276 declare -lib iemmatrix;
#X obj 41 150 declare -path libs/iemlib -stdpath iemlib;
#X obj 391 152 declare -lib iemlib/iemlib1 -lib iemlib/iemlib2;
#X obj 27 273 declare -path libs/iemmatrix -stdpath iemmatrix;
#X obj 24 326 declare -path libs/iem_ambi -stdpath iem_ambi;
#X obj 31 451 declare -path libs/acre -stdpath acre;
#X obj 27 366 declare -path libs/iem_bin_ambi -stdpath iem_bin_ambi
;
#X obj 28 387 declare -path libs/iem_spec2 -stdpath iem_spec2;
#X obj 412 387 declare -lib iem_spec2;
#N canvas 834 148 450 300 spec2_specialnames 0;
#X obj 21 34 spec2_mul~;
#X obj 23 54 spec2_add~;
#X obj 22 78 spec2_sub~;
#X obj 104 53 spec2_add_scalar~;
#X obj 104 33 spec2_mul_scalar~;
#X restore 578 387 pd spec2_specialnames;
#X text 44 15 externals: first search local in libs \, second in system
--- \, if installed there so both path are listed here;
#X text 44 211 zexy set path itself \, dont know why ...;
#X text 32 118 iemlib is oldest (and therefore sometimes outdated from
path usage or names... but essential;
#X text 29 184 Zexy \, second oldest \; -) from IEM.;
#X text 29 244 IEM-Matrix new version (not iem-matrix !);
#X text 384 248 Trick: if library is split in multiple lib files \,
extended used to do this \, find names like *~ with specialnames,
f 65;
#X text 23 299 Ambilib was a first implementation of spherical harmonics
calcs and usefull up to now.;
#X text 21 348 for binaural tools an old binaural rendere needs iem_spec2
;
#X text 30 423 ACRE Library base (abstractions only until now);
#X restore 81 42 pd declares;
#N canvas 484 347 978 525 GUI 1;
#X obj 460 49 mxr/test/tones_ctl 1;
#X obj 136 55 ds/ctl /set;
#X obj 20 30 bng 15 250 50 0 /amb/initbang /amb/initbang REINIT 17
7 0 10 -262144 -1 -1;
#X obj 727 54 amb/rrr/ctl /REV;
#X obj 16 75 mxr/master/ctl M;
#X text 17 10 Example Mixer 3rd order 3D to an Ambisonics Bus output
;
#X obj 66 298 amb/bus/outs_ctl AMBIBUS 16 AMBI;
#X obj 827 54 amb/player/ctl player;
#X obj 460 349 amb/spat/ch_ctl /ch/1 3D;
#X obj 460 449 amb/spat/rotz_ctl /ch/1;
#X obj 575 254 amb/spat/ch_ctl /ch/2 2D;
#X obj 460 249 amb/spat/ch_hemi /ch/1 3D;
#X text 134 34 parameter storage;
#X text 467 25 Testchannel 1;
#X text 576 20 sample looper;
#X obj 577 49 mxr/test/ts_ctl schritte;
#X text 728 19 Ambisonics;
#X text 729 33 Reverb 6 in;
#X text 577 361 spat in 2D 3O;
#X text 574 376 rendered to 3D;
#X obj 689 270 amb/sphere/hemi /inputs;
#X obj 910 285 tgl 15 0 /inputs/edit /inputs/edit edit_inputs 17 7
0 10 -262144 -1 -1 1 1;
#X obj 265 81 amb/bin/ctl BIN;
#X text 262 35 AMBI bus Binaural;
#X text 278 290 To Mon;
#X text 265 62 Needs CPU a lot !;
#X obj 16 298 amb/bus/bus_ctl~ bin 2;
#X obj 18 390 amb/bus/ctl~ 3D 3 AMBI A;
#X text 20 278 Master Buses;
#X text 16 370 3D 3O Bus;
#X text 18 48 Master CTL;
#X obj 117 393 amb/bus/ctl~ 2D 3 AMBI2D;
#X obj 192 394 amb/bus/bus_ctl~ virt7out 7;
#X obj 196 339 amb/decoder/ctl 2Dto3D 2D 3;
#X restore 264 41 pd GUI;
#X text 13 425 --- Out Kanaele (DACs) und Monitor ---;
#X text 19 221 --- Ambisonics Bus AMB1/Decoder ---;
#X obj 573 33 mxr/test/tones_ds /set 1;
#X text 426 373 --- Ambisonics Player ---;
#X obj 14 82 ds/storage_logic /set;
#X obj 428 416 amb/amb/n 3D 3;
#X text 685 369 --- REV ---;
#X obj 667 414 amb/rrr/ds /rrr /REV;
#X obj 668 436 amb/rrr/presets;
#X obj 18 443 mxr/master/master~ M;
#X text 101 234 (3+1)Â²=16;
#X obj 668 391 amb/rrr/dsp~ /REV rev AMBI;
#X text 20 236 Make a bus;
#X obj 428 394 r /amb/encinit;
#X text 446 435 max channel count;
#X obj 428 452 amb/player/dsp~ player 16 AMBI;
#X obj 428 472 amb/player/ds /set player;
#X obj 422 109 amb/spat/rotz /ch/1;
#X text 465 3 --- TEST Channel 1 with encoder ---;
#X obj 583 164 mxr/test/ts_ds /set schritte;
#X obj 429 164 mxr/test/ts schritte;
#X obj 447 185 throw~ rev-2~;
#X obj 430 240 amb/spat/rotz /ch/2;
#X obj 577 240 amb/spat/rotz_ds /set /ch/2;
#N canvas 1129 87 773 501 amb/encoder/bus 0;
#X obj 33 56 r~ virt7out-1~;
#X text 29 38 front center=1 \, count to left;
#X text 153 56 0 Grad;
#X obj 385 114 acre/count_until;
#X msg 385 92 7;
#X obj 361 20 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 449 67 360 7;
#X obj 449 89 /;
#X obj 385 50 t b b b;
#X obj 385 207 iem_s;
#X msg 470 183 set /virt/\$1/azimuth;
#X obj 380 399 iem_s;
#X msg 427 370 set /virt/\$1/elevation;
#X obj 381 368 f 10;
#X obj 381 343 t b f;
#X obj 381 252 r /ring/height;
#X obj 381 320 acre/count_until;
#X msg 381 297 7;
#X obj 381 274 t b f;
#X obj 385 163 - 1;
#X obj 385 184 * 51.4286;
#X obj 385 136 t f b f;
#X obj 543 83 acre/count_until;
#X msg 543 61 7;
#X msg 543 105 \; /virt/\$1/dist 1;
#X obj 32 106 r~ virt7out-2~;
#X obj 32 160 r~ virt7out-3~;
#X obj 31 211 r~ virt7out-4~;
#X obj 30 265 r~ virt7out-5~;
#X obj 30 324 r~ virt7out-6~;
#X obj 36 380 r~ virt7out-7~;
#X text 33 454 Note: Should go in an spat/chls~ abstraction;
#X text 427 398 10 Grad is fine for good energy distribution;
#X text 31 -2 Virtual 7 speaker in an circle \, where the height can
be controlled;
#X obj 543 31 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 33 83 amb/spat/ch~ /virt/1 3D 3 AMBI;
#X obj 32 133 amb/spat/ch~ /virt/2 3D 3 AMBI;
#X obj 32 187 amb/spat/ch~ /virt/3 3D 3 AMBI;
#X obj 31 238 amb/spat/ch~ /virt/4 3D 3 AMBI;
#X obj 30 292 amb/spat/ch~ /virt/5 3D 3 AMBI;
#X obj 30 351 amb/spat/ch~ /virt/6 3D 3 AMBI;
#X obj 36 407 amb/spat/ch~ /virt/7 3D 3 AMBI;
#X obj 385 26 r /amb/inited;
#X obj 569 29 r /amb/inited;
#X connect 0 0 35 0;
#X connect 3 0 21 0;
#X connect 4 0 3 0;
#X connect 5 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 20 1;
#X connect 8 0 4 0;
#X connect 8 1 6 0;
#X connect 10 0 9 1;
#X connect 12 0 11 1;
#X connect 13 0 11 0;
#X connect 14 0 13 0;
#X connect 14 1 12 0;
#X connect 15 0 18 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 18 0 17 0;
#X connect 18 1 13 1;
#X connect 19 0 20 0;
#X connect 20 0 9 0;
#X connect 21 0 19 0;
#X connect 21 2 10 0;
#X connect 22 0 24 0;
#X connect 23 0 22 0;
#X connect 25 0 36 0;
#X connect 26 0 37 0;
#X connect 27 0 38 0;
#X connect 28 0 39 0;
#X connect 29 0 40 0;
#X connect 30 0 41 0;
#X connect 34 0 23 0;
#X connect 42 0 8 0;
#X connect 43 0 23 0;
#X restore 431 328 pd amb/encoder/bus virt7out 7 3D 3 AMBI;
#X obj 423 31 mxr/test/tones~ 1;
#X obj 440 57 throw~ rev-1~;
#X obj 664 84 amb/spat/ch_ds /set /ch/1;
#X text 651 216 dont need to store position;
#X text 570 109 position is stored \, only for performance;
#X obj 187 485 amb/bus/dacs~ stereo 2 bin;
#X text 16 461 output stereo to DAC 1 \, 2;
#N canvas 6 66 450 300 example 0;
#X obj 62 70 declare -path ../..;
#X text 21 14 Example specific stuff in here \,;
#X text 63 50 patch should work like in acre base dir as lib dir;
#X restore 171 42 pd example;
#X text 16 3 Example 3.order Ambisonics Example: Test channel and Player
to Ambisonics Bus;
#X text 18 64 Store settings in /set data storage with presets;
#X obj 21 128 amb/bus/adcs~ IN 2 in 0 0;
#X text 215 126 Stereo In for spatialisation;
#X text 246 144 Ambisonics in 3D3O;
#X obj 20 185 amb/bus/fade~ A1 16 AMBI-IN AMBI-IN-FADED 0 0;
#X obj 20 204 amb/bus/mix~ A1 16 AMBI-IN-FADED AMBI 0 0;
#X text 14 108 --- INs ---;
#X text 20 164 --- mix AMBISONIC in faded to AMBI bus -;
#X obj 16 253 amb/bus/dsp~ 3D 3 AMBI;
#X obj 15 275 amb/bus/outs~ AMBI 16 AMBI-OUT M;
#X obj 17 525 amb/bus/dacs~ outbus 16 AMBI-OUT 3;
#X text 427 139 --- test channel as 2D-ambi mapped with 3D encoder
---;
#X text 428 282 decode 2D to a speaker ring with 7 speaker;
#X text 555 197 Spat in 2D 3rd order;
#X text 708 328 7 virtual speakers in 3D;
#X obj 15 299 amb/bus/outs_ds /set AMBI 16 AMBI-OUT 0;
#X text 11 327 --- internal binaural ---;
#X obj 16 376 amb/bin/dsp~ BIN AMBI;
#X obj 179 375 amb/bin/ds /set BIN;
#X text 15 507 Output Ambisonic AMBI-OUT to DACs 3-18;
#X text 16 543 for external Decoder like ambix_binaural standalone
;
#X obj 22 147 amb/bus/adcs~ A1 16 AMBI-IN 0 2;
#X text 604 262 Collect Spat channels;
#X obj 15 484 amb/bus/bus~ bin 2;
#X text 594 506 Extent for binaural input;
#X text 254 261 fader \, del and master;
#X text 178 253 SUM AMBI Bus;
#X text 210 351 extent to 4th order;
#X obj 16 402 throw~ bin-1~;
#X obj 160 400 throw~ bin-2~;
#X obj 430 264 amb/bus/dsp~ 2D 3 AMBI2D;
#X obj 17 353 amb/bus/dsp~ 3D 4 AMBI 16;
#X text 297 299 store in settings;
#X obj 429 216 amb/spat/ch~ /ch/2 2D 3 AMBI2D;
#X obj 422 85 amb/spat/ch~ /ch/1 3D 3 AMBI;
#X obj 432 300 amb/decoder/dsp~ 2Dto3D 2D 3 AMBI2D virt7out 7;
#X connect 8 0 18 0;
#X connect 16 0 8 0;
#X connect 23 0 24 0;
#X connect 23 0 70 0;
#X connect 28 0 29 0;
#X connect 28 0 71 0;
#X connect 54 0 65 0;
#X connect 54 1 66 0;
